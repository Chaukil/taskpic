<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ghi Chú Tinh Tế</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <div class="container">
      <header class="header">
        <button id="settingsBtn" class="settings-btn">
        <i class="fas fa-cog"></i>
    </button>
        <h1>Châu Chí Kil</h1>
        <p>Lưu trữ suy nghĩ và ý tưởng của bạn một cách phong cách</p>
      </header>

      <div class="controls">
        <div class="controls-container">
          <input
            type="text"
            id="searchInput"
            placeholder="Tìm kiếm ghi chú..."
            class="search-input"
          />
          <div class="filter-group">
            <select id="filterSelect" class="filter-select">
              <option value="all">Tất cả ghi chú</option>
              <option value="completed">Đã hoàn thành</option>
            </select>
            <button id="addNoteBtn" class="add-btn">
              <i class="fas fa-plus"></i> Thêm mới
            </button>
            <button id="completeAllBtn" class="action-btn complete-all-btn">
              <i class="fas fa-check-double"></i> Hoàn thành tất cả
            </button>
            <button id="resetAllBtn" class="action-btn reset-all-btn">
              <i class="fas fa-redo"></i> Bắt đầu ngày mới
            </button>
          </div>
        </div>
      </div>

      <div id="notesContainer" class="notes-grid">
        </div>

      <div id="emptyState" class="empty-state">
        <i class="fas fa-notes-medical"></i>
        <h3>Không có ghi chú</h3>
        <p>Thêm ghi chú đầu tiên của bạn bằng cách nhấp vào nút "Thêm"</p>
      </div>

      <div id="addNoteModal" class="modal-overlay">
        <div class="modal">
          <div class="modal-header">
            <h3 class="modal-title" id="modalTitle">Ghi chú mới</h3>
            <button id="closeModalBtn" class="modal-close">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <form id="noteForm" class="modal-body">
            <div class="form-group">
              <label for="noteTitle" class="form-label">Tiêu đề</label>
              <input type="text" id="noteTitle" class="form-input" required />
            </div>
            <div class="form-group">
              <label for="noteContent" class="form-label">Nội dung</label>
              <textarea
                id="noteContent"
                class="form-input form-textarea"
                required
              ></textarea>
            </div>
            <div class="form-group">
              <label for="noteTime" class="form-label">Thời gian</label>
              <input type="time" id="noteTime" class="form-input" required />
            </div>
            <div class="form-group">
              <label class="form-label">Thẻ</label>
              <div id="noteTagsContainer" class="tags-container">
                </div>
              <button type="button" id="manageTagsBtn" class="action-btn small-btn">
                <i class="fas fa-tags"></i> Quản lý Thẻ
              </button>
            </div>
            <button type="submit" class="submit-btn" id="submitNoteBtn">
              Lưu ghi chú
            </button>
          </form>
        </div>
      </div>

      <div id="viewNoteModal" class="modal-overlay">
        <div class="modal">
          <div class="modal-header">
            <h3 class="modal-title" id="viewNoteTitle"></h3>
            <button id="closeViewModalBtn" class="modal-close">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <div class="view-meta-row">
              <div class="meta-item">
                <label class="form-label">Thẻ:</label>
                <span id="viewNoteTag" class="view-content note-tag"></span>
              </div>
              <div class="meta-item">
                <label class="form-label">Trạng thái:</label>
                <span id="viewNoteStatus" class="view-content"></span>
              </div>
              <div class="meta-item">
                <label class="form-label">Thời gian:</label>
                <p id="viewNoteTime" class="view-content"></p>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">Nội dung:</label>
              <p id="viewNoteContent" class="view-content"></p>
            </div>

            <div id="viewNoteActions" class="form-group"></div>
          </div>
        </div>
      </div>

      <div id="confirmModal" class="modal-overlay">
        <div class="modal confirmation-modal">
          <div class="modal-body">
            <p class="confirmation-text">
              Bạn có chắc chắn muốn xóa ghi chú này không?
            </p>
            <div class="confirmation-buttons">
              <button id="cancelDeleteBtn" class="confirmation-btn cancel-btn">
                Hủy
              </button>
              <button
                id="confirmDeleteBtn"
                class="confirmation-btn confirm-btn"
              >
                Xóa
              </button>
            </div>
          </div>
        </div>
      </div>

      <div id="manageTagsModal" class="modal-overlay">
        <div class="modal">
          <div class="modal-header">
            <h3 class="modal-title">Quản lý Thẻ Ghi Chú</h3>
            <button id="closeManageTagsModalBtn" class="modal-close">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="newTagName" class="form-label">Tên Thẻ Mới/Sửa</label>
              <input type="text" id="newTagName" class="form-input" placeholder="Ví dụ: Du lịch" />
            </div>
            <div class="form-group">
              <label for="newTagIcon" class="form-label">Icon (Font Awesome class)</label>
              <input type="text" id="newTagIcon" class="form-input" placeholder="Ví dụ: fas fa-plane" />
              <p class="help-text">Tìm icon tại: <a href="https://fontawesome.com/v5/search?m=free" target="_blank">Font Awesome Free</a> (chỉ copy class, ví dụ: `fas fa-plane`)</p>
            </div>
            <div class="form-group">
              <label for="newTagColor" class="form-label">Màu Thẻ</label>
              <input type="color" id="newTagColor" class="form-input color-input" value="#4f46e5" />
              <p class="help-text">Chọn màu nền cho thẻ.</p>
            </div>
            <button id="addOrUpdateTagBtn" class="submit-btn small-btn">Thêm Thẻ</button>
            <hr style="margin: 20px 0;">
            <h4>Các Thẻ Hiện Có:</h4>
            <div id="currentTagsList" class="tags-list">
              </div>
          </div>
        </div>
      </div>

      <div id="settingsModal" class="modal-overlay">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Cài đặt</h3>
            <button id="closeSettingsModalBtn" class="modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="noteColumns" class="form-label">Số cột hiển thị ghi chú:</label>
                <select id="noteColumns" class="form-input">
                    <option value="1">1 cột</option>
                    <option value="2">2 cột</option>
                    <option value="3">3 cột</option>
                    <option value="4">4 cột</option>
                </select>
            </div>
            <div class="form-group">
                <label for="backgroundColor" class="form-label">Màu nền trang web:</label>
                <input type="color" id="backgroundColor" class="form-input color-input" value="#f8f9fa" />
            </div>
            <div class="form-group">
                <label for="languageSelect" class="form-label">Ngôn ngữ:</label>
                <select id="languageSelect" class="form-input">
                    <option value="vi">Tiếng Việt</option>
                    <option value="en">English</option>
                </select>
            </div>
            <div class="form-group">
                <label for="notificationTimeBefore" id="notificationTimeBeforeLabel" class="form-label" data-lang="notificationTimeBefore">Thông báo trước (phút):</label>
                <select id="notificationTimeBefore" class="form-input">
                    <option value="0">Không thông báo</option>
                    <option value="5">5 phút</option>
                    <option value="10">10 phút</option>
                    <option value="15">15 phút</option>
                    <option value="30">30 phút</option>
                    <option value="60">60 phút</option>
                </select>
            </div>
            <button id="saveSettingsBtn" class="submit-btn small-btn">Lưu Cài đặt</button>
        </div>
    </div>
</div>
    </div>

    <div id="toastContainer" class="toast-container"></div>

    <footer class="footer">
      <p>&copy; 2025 Lập trình và phát triển web - Châu Kil</p>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="./index.js"></script>
  </body>
</html>